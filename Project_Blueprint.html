
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Project Blueprint: The Agency (Rev 2.5)</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            background-color: #f4f4f9;
            color: #333;
        }
        h1, h2, h3 {
            color: #2c3e50;
        }
        pre {
            background-color: #eef;
            padding: 10px;
            overflow-x: auto;
        }
        code {
            background-color: #eee;
            padding: 2px 4px;
            font-size: 90%;
            border-radius: 3px;
        }
        section {
            margin-bottom: 30px;
        }
    </style>
</head>
<body>
    <h1>Project Blueprint: The Agency (Rev 2.5)</h1>
    
    <section>
        <h2>1. Mission & Purpose</h2>
        <ul>
            <li>Develop a decentralized, multi-agent AI system focused on real-world utility, autonomous task execution, and ethical resilience.</li>
            <li>Target applications: software engineering, scientific research, automation, and multimedia generation.</li>
            <li>Design for modularity, developer extensibility, and long-term maintainability.</li>
        </ul>
    </section>

    <section>
        <h2>2. System Architecture</h2>
        <h3>2.1 Agent Kernel</h3>
        <ul>
            <li><strong>Skill Layer:</strong> Modular Python functions (e.g., <code>scrape_site()</code>, <code>query_api()</code>, <code>generate_image(prompt)</code>) loaded via plugin system.</li>
            <li><strong>Memory Layer:</strong> Fast-access working memory (in-RAM dicts), persistent symbolic memory (SQLite), semantic memory (FAISS).</li>
            <li><strong>Execution Engine:</strong> Event-driven task loop with context switching and structured retry logic.</li>
            <li><strong>Ethical Guardrails:</strong> Decorators (e.g., <code>@requires_ethics_check</code>) and runtime hooks block disallowed actions. Hooks register at kernel init; use dynamic imports and tracing to enforce constraints.</li>
        </ul>
        <h3>2.2 Meta-Agent Layer</h3>
        <ul>
            <li>Coordinates agents, handles arbitration, and mission orchestration.</li>
            <li>Uses priority queues + entropy-based analysis to detect overloaded/deadlocked agents.</li>
            <li>Replanning triggers: failed tasks, elevated conflict frequency, time-to-completion anomalies.</li>
        </ul>
        <h3>2.3 Message Bus</h3>
        <ul>
            <li>Redis Pub/Sub default with optional MQTT or gRPC.</li>
            <li>Messages use JSON schema, signed and encrypted (TLS 1.3 + HMAC). Schema validated via <code>pydantic</code>.</li>
        </ul>
        <h3>2.4 Deployment Modes</h3>
        <ul>
            <li><strong>Local Mode:</strong> SQLite fallback, minimal runtime.</li>
            <li><strong>LAN Mode:</strong> SQLite on a shared mount point (e.g., NFS). Agents use <code>hostname</code>-based node identity.</li>
            <li><strong>Hybrid Mode:</strong> Cloud-mirrored SQLite/FAISS (read-only unless override). Cloud target TBD (S3-compatible).</li>
        </ul>
    </section>

    <section>
        <h2>3. Intelligence & Learning</h2>
        <h3>3.1 Self-Improvement Loop</h3>
        <p>Log review agents score outcomes by metrics: success flag, time-to-completion, log quality, I/O relevance. Spawn request if failures exceed adaptive threshold or capability gap detected.</p>
        <h3>3.2 Adaptive Skill Management</h3>
        <p>Uses LM Studio/Ollama for local codegen. Lint via <code>ruff</code>; failure blocks deployment. Manual fallback if model generation fails.</p>
        <h3>3.3 Memory Dynamics</h3>
        <p>Semantic memory uses cosine distance with recency weighting (e.g., <code>score = cos_sim * exp(-delta_t / T)</code>). Symbolic/semantic delta compared per mission tag to detect decay or conflicts.</p>
    </section>

    <section>
        <h2>... [truncated for brevity]</h2>
        <p>Full HTML continues for all other sections...</p>
    </section>
</body>
</html>
